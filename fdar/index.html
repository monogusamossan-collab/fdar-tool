<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FDAR記録支援ツール（FDAR）</title>
  <style>
    :root{color-scheme:light dark;}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;margin:12px;line-height:1.5}
    h1{font-size:20px;margin:0 0 12px}
    a{color:inherit}
    .card{border:1px solid rgba(127,127,127,.35);border-radius:14px;padding:12px}
    label{display:block;font-size:12px;opacity:.85;margin:10px 0 6px}
    input,textarea{width:100%;box-sizing:border-box;border:1px solid rgba(127,127,127,.35);border-radius:12px;padding:10px 12px;background:transparent;color:inherit;font-size:16px}
    textarea{min-height:88px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1 1 160px}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{border:0;border-radius:12px;padding:10px 14px;font-size:16px}
    button.primary{background:#0a84ff;color:#fff}
    button.secondary{background:transparent;color:inherit;border:1px solid rgba(127,127,127,.35)}
    pre{white-space:pre-wrap;border:1px dashed rgba(127,127,127,.45);border-radius:12px;padding:10px;margin-top:10px;min-height:44px}
    .note{font-size:12px;opacity:.8;margin-top:8px}
  </style>
</head>
<body>
  <h1>FDAR記録支援ツール（FDAR）</h1>
  <div class="card">
    <div class="row">
      <div>
        <label>利用者名（※個人情報は入力しない運用）</label>
        <input id="name" autocomplete="off" placeholder="例：A様" />
      </div>
      <div>
        <label>日付</label>
        <input id="date" autocomplete="off" placeholder="例：2026/02/07" />
      </div>
    </div>

    <label>F（訴え・状況）</label>
    <textarea id="f" placeholder="例：本日も腰痛あり。歩行時に痛み増強。"></textarea>

    <label>D（評価・所見）</label>
    <textarea id="d" placeholder="例：立位で疼痛NRS○/10。体幹伸展で増悪。"></textarea>

    <label>A（対応・介入）</label>
    <textarea id="a" placeholder="例：体幹安定化練習、動作指導、疼痛緩和目的の徒手。"></textarea>

    <label>R（反応・結果）</label>
    <textarea id="r" placeholder="例：介入後、立位時痛み軽減。歩行距離が伸びた。"></textarea>

    <div class="btns">
      <button class="primary" id="build">作成</button>
      <button class="secondary" id="copy">コピー</button>
      <button class="secondary" id="clear">クリア</button>
    </div>

    <pre id="out"></pre>
    <div class="note">※「作成」→「コピー」でそのまま記録に貼れます</div>
  </div>

<script>
  const $ = (id)=>document.getElementById(id);

  function buildText(){
    const name = $("name").value.trim();
    const date = $("date").value.trim();
    const F = $("f").value.trim();
    const D = $("d").value.trim();
    const A = $("a").value.trim();
    const R = $("r").value.trim();

    const lines = [];
    if(name || date){
      lines.push(`【${name || "利用者"}】${date ? "（" + date + "）" : ""}`);
    }
    if(F) lines.push(`F：${F}`);
    if(D) lines.push(`D：${D}`);
    if(A) lines.push(`A：${A}`);
    if(R) lines.push(`R：${R}`);

    return lines.join("\n");
  }

  $("build").addEventListener("click", ()=>{
    $("out").textContent = buildText();
  });

  $("copy").addEventListener("click", async ()=>{
    const text = $("out").textContent || buildText();
    try{
      await navigator.clipboard.writeText(text);
    }catch(e){
      // iOS/Safari対策：選択してコピー
      const range = document.createRange();
      range.selectNodeContents($("out"));
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
      document.execCommand("copy");
      sel.removeAllRanges();
    }
  });

  $("clear").addEventListener("click", ()=>{
    ["name","date","f","d","a","r"].forEach(id=>$(id).value="");
    $("out").textContent = "";
  });
</script>
</body>
</html>
