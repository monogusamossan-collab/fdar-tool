<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FDAR記録支援ツール（SOAP）</title>
  <style>
    :root{color-scheme:light dark;}
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;margin:12px;line-height:1.5}
    h1{font-size:20px;margin:0 0 12px}
    .card{border:1px solid rgba(127,127,127,.35);border-radius:14px;padding:12px}
    label{display:block;font-size:12px;opacity:.85;margin:10px 0 6px}
    input,textarea{width:100%;box-sizing:border-box;border:1px solid rgba(127,127,127,.35);border-radius:12px;padding:10px 12px;background:transparent;color:inherit;font-size:16px}
    textarea{min-height:88px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1 1 160px}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{border:0;border-radius:12px;padding:10px 14px;font-size:16px}
    button.primary{background:#0a84ff;color:#fff}
    button.secondary{background:transparent;color:inherit;border:1px solid rgba(127,127,127,.35)}
    pre{white-space:pre-wrap;border:1px dashed rgba(127,127,127,.45);border-radius:12px;padding:10px;margin-top:10px;min-height:44px}
    .note{font-size:12px;opacity:.8;margin-top:8px}
  </style>
</head>
<body>
  <h1>FDAR記録支援ツール（SOAP）</h1>
  <div class="card">
    <div class="row">
      <div>
        <label>利用者名（※個人情報は入力しない運用）</label>
        <input id="name" autocomplete="off" placeholder="例：A様" />
      </div>
      <div>
        <label>日付</label>
        <input id="date" autocomplete="off" placeholder="例：2026/02/07" />
      </div>
    </div>

    <label>S（主観情報）</label>
    <textarea id="s" placeholder="例：歩くと腰が痛い。昨日より少しつらい。"></textarea>

    <label>O（客観情報）</label>
    <textarea id="o" placeholder="例：歩行○mで疼痛訴え。体幹伸展で痛み増悪。"></textarea>

    <label>A（評価）</label>
    <textarea id="a" placeholder="例：腰部伸展負荷で疼痛誘発。動作パターンの影響が示唆。"></textarea>

    <label>P（計画）</label>
    <textarea id="p" placeholder="例：体幹安定化練習・動作指導継続。次回は立ち上がり動作を評価。"></textarea>

    <div class="btns">
      <button class="primary" id="build">作成</button>
      <button class="secondary" id="copy">コピー</button>
      <button class="secondary" id="clear">クリア</button>
    </div>

    <pre id="out"></pre>
    <div class="note">※「作成」→「コピー」でそのまま記録に貼れます</div>
  </div>

<script>
  const $ = (id)=>document.getElementById(id);

  function buildText(){
    const name = $("name").value.trim();
    const date = $("date").value.trim();
    const S = $("s").value.trim();
    const O = $("o").value.trim();
    const A = $("a").value.trim();
    const P = $("p").value.trim();

    const lines = [];
    if(name || date){
      lines.push(`【${name || "利用者"}】${date ? "（" + date + "）" : ""}`);
    }
    if(S) lines.push(`S：${S}`);
    if(O) lines.push(`O：${O}`);
    if(A) lines.push(`A：${A}`);
    if(P) lines.push(`P：${P}`);

    return lines.join("\n");
  }

  $("build").addEventListener("click", ()=>{
    $("out").textContent = buildText();
  });

  $("copy").addEventListener("click", async ()=>{
    const text = $("out").textContent || buildText();
    try{
      await navigator.clipboard.writeText(text);
    }catch(e){
      const range = document.createRange();
      range.selectNodeContents($("out"));
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
      document.execCommand("copy");
      sel.removeAllRanges();
    }
  });

  $("clear").addEventListener("click", ()=>{
    ["name","date","s","o","a","p"].forEach(id=>$(id).value="");
    $("out").textContent = "";
  });
</script>
</body>
</html>
